// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Orcamento {
  id                 Int               @id @default(autoincrement())
  codigo             String?           @map("codigo")
  status             String?           @map("status")
  unidadenegocioid   Int               @map("unidadenegocioid")
  
  // Relações
  unidadeNegocio     UnidadeNegocio    @relation(fields: [unidadenegocioid], references: [id])
  itens              ItemOrcamento[]

  @@map("orcamento") // Mapeia este modelo para a tabela 'orcamento'
}

model ItemOrcamento {
  id                 Int               @id @default(autoincrement())
  orcamentoid        Int               @map("orcamentoid")
  embalagemid        Int               @map("embalagemid")
  quantidade         Decimal           @map("quantidade") // Use Decimal para valores/quantidades
  valortotal         Decimal           @map("valortotal")

  // Relações
  orcamento          Orcamento         @relation(fields: [orcamentoid], references: [id])
  embalagem          Embalagem         @relation(fields: [embalagemid], references: [id])

  @@map("itemorcamento")
}

model UnidadeNegocio {
  id                 Int               @id @default(autoincrement())
  codigo             String?           @map("codigo") // Onde você filtra a 'filial'
  
  // Relação
  orcamentos         Orcamento[]

  @@map("unidadenegocio")
}

model Embalagem {
  id                 Int               @id @default(autoincrement())
  descricao          String?           @map("descricao")

  // Relação
  itensOrcamento     ItemOrcamento[]

  @@map("embalagem")
}